---
title: "Fin452-Week2"
---

```{r, "Libraries"}

library(tidyquant)
library(tidyverse)
library(quantmod)

```

```{r, "Pulling Stock Prices."}

pullStock <- function(tick, from = NA, to = NA){
  # Function that pulls stock data using tidyquant::tqget.
  # tick: ticker or vector of tickers, string.
  # from: from date for data. Will filter using value or include all if left blank. String or date object.
  # to: Same as from. String or date object
  
  data <- tidyquant::tq_get(tick, get = "stock.prices",
                            from = from, to = to,
                            complete_cases = TRUE) %>%
    stats::na.omit()
  
  data_ret <- data %>%
    dplyr::mutate(ret_norm = (adjusted / lag(adjusted)) - 1,
                  ret_abs = adjusted - lag(adjusted),
                  ret_log = log(adjusted/lag(adjusted)) - 1) %>%
    stats::na.omit()
  
  return(data_ret)
}


```

```{r, "Pulling Options prices."}

pullOption <- function(tick, Exp){
  # Function that pulls option data using quantmod::getOptionChain.
  # tick: ticker or vector of tickers, string.
  # Exp: Expiry date of the contract, must be in the future.
  # Note: Only prices for currently available contracts listed.
  
  data <- quantmod::getOptionChain(tick, Exp, src = "yahoo")
  
  return(data)
  
  }

```